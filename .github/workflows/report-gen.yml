name: Generate Report
on:
  schedule:
    - cron: '0 0 * * *'  # ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾ Ð² 00:00
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      - run: pip install -r requirements.txt
      - run: |
          echo "ðŸ“Š Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ð¹ Ð¾Ñ‚Ñ‡ÐµÑ‚ Ð¿Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹" > report.md
          echo "Ð¡Ð¾Ð·Ð´Ð°Ð½: $(date)" >> report.md
          echo "" >> report.md
          echo "### ðŸ“ˆ Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ" >> report.md
          echo "- Ð’ÑÐµÐ³Ð¾ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²: 10" >> report.md
          echo "- ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹: 4" >> report.md
          echo "- Ð¡Ñ€ÐµÐ´Ð½ÐµÐµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ‚ÐµÐ³Ð¾Ð² Ð½Ð° Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»: 2.5" >> report.md
          echo "" >> report.md
          echo "### ðŸ“š Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸" >> report.md
          echo "- Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ñ€Ð°ÑÑˆÐ¸Ñ€Ð¸Ñ‚ÑŒ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…" >> report.md
          echo "- Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð» Ð¿Ð¾ Ð¾Ñ†ÐµÐ½ÐºÐµ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²" >> report.md
      - name: Upload report
        uses: actions/upload-artifact@v3
        with:
          name: daily-report
          path: report.md
      - name: Commit and push changes
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add report.md
          if [ -n "$(git status --porcelain)" ]; then
            git commit -m "Update daily report" || echo "No changes to commit"
          fi
